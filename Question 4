#include <iostream>
#include <stack>
#include <string>
using namespace std;
int check(char a){
    switch(a){
        case '+':
            return 1;
        
        case '-':
        return 1;

        case '/':
        return 3;

        case '*':
        return 3;

        case '^':
        return 4;

        case '(':
        return -1;
        
        case ')':
        return -2;

        default:
        cout<<"error"<<endl;
        return 0;


    }
}
string itp(string a){
    stack <char> b;
    string answer;
    
   
    int n=a.length();
    for (int i=0;i<n;i++){
        if(isdigit(a[i])){
            answer.push_back(a[i]);
            

        }
        else{
            int num=check(a[i]);
            
                if(b.empty()){
                    b.push(a[i]);
                }
                else if(num!=-1&&num!=-2){
                    int num2=check(b.top());
                    if(num<=num2&&!b.empty()){
                    while(num<=num2){
                        if(num>num2||b.empty()){
                            break;

                        }
                        else{
                        answer.push_back(b.top());
                       
                        b.pop();
                    num2=check(b.top());}}
                    


                    }
                    else{
                        b.push(a[i]);
                    }
                }
                else if(num==-1){
                    b.push(a[i]);
                }
                else if(num==-2){
                    
                    while(true){
                         if(b.empty()){
                            break;
                        }
                        int num3=check(b.top());
                       
                       if(num3==-1){
                            b.pop();
                            break;
                        }
                        else{
                            answer.push_back(b.top());
                            b.pop();
                            

                        }
                    }
                }
            

        }

    }
    if(b.empty()){
        return answer;
    }
    else{
        while(!b.empty()){
            answer.push_back(b.top());
           
            b.pop();
        }
        return answer;
    }

}
int main(){
    string a="(20+17)*(18-19)";
    string b=itp(a);
    cout<<b;

}
